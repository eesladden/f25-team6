<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manage Listings - TradeTable</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- NAVBAR -->
    <nav class="navbar navbar-expand-lg bg-body-tertiary border-bottom sticky-top navbar-light bg-light">
    <div class="container">
        <a class="navbar-brand fw-bold" href="common/home.html">Trade Table</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav">
        <span class="navbar-toggler-icon"></span>
        </button>
        <div id="nav" class="collapse navbar-collapse">
        <ul class="navbar-nav ms-auto">
            <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown">Customer</a>
            <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="customer-prototype/trade-dashboard.html">Trade Dashboard</a></li>
                <li><a class="dropdown-item" href="customer-prototype/messaging.html">Messaging</a></li>
                <li><a class="dropdown-item" href="customer-prototype/profile.html">Profile</a></li>
                <li><a class="dropdown-item" href="customer-prototype/watchlist.html">Watchlist</a></li>
            </ul>
            </li>
            <li class="nav-item"><a class="nav-link" href="provider-prototype/provider-dashboard.html">Provider</a></li>
        </ul>
        </div>
    </div>
    </nav>
    <!-- END NAVBAR -->
    <div class="container mt-4">
    <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="../common/home.html">Home</a></li>
            <li class="breadcrumb-item"><a href="./provider-dashboard.html">Provider Dashboard</a></li>
            <li class="breadcrumb-item active" aria-current="page">Manage Listings</li>
    </ol>
    <div class="container d-flex justify-content-center align-items-start align-items-md-center">
        <div class="manage-listings-container card shadow-sm p-4 signup-card mt-3 mt-md-0 manage-listings-container">
            <h2 class="h5 mb-3 text-center">Manage Your Listings</h2>

            <div class="listing-item card mb-3 p-3 listing-item-charizard">
                <div class="row g-0">
                    <div class="col-md-2 d-flex align-items-center justify-content-center">
                        <img src="https://encrypted-tbn1.gstatic.com/shopping?q=tbn:ANd9GcQGAalYINRgpjWYpD5P6z_tyzb1Pq2FLKEyXUhekei9y7LPNIudvFV4SAhQQrzMjkPJWrIvdYfOCTpAxwn5gM8HJLjwIF6a" class="img-fluid rounded m-2 card-image-sm" alt="Card Image">
                    </div>
                <div class="col-md-9 d-flex flex-column justify-content-center">
                    <div class="card-body">
                        <h5 class="card-title card-name-charizard">Charizard Holo — NM</h5>
                        <p class="text-secondary small mb-3">For Sale • Pokémon • Base Set • Listing ID #12345</p>
                        <div class="d-flex justify-content-between small">
                            <span>Market</span><strong class="market-price-charizard">$275</strong>
                        </div>
                        <div class="d-flex justify-content-between small">
                            <span>Low / High</span><strong><span class="low-price-charizard">$240</span> / <span class="high-price-charizard">$310</span></strong>
                        </div>
                        <div class="text-secondary tiny">Source: TCGplayer • Updated: 2h ago</div>
                        <hr>
                        <div class="text-center tiny mb-3">
                            <strong>Game:</strong> <span class="game-charizard">Pokémon</span> • <strong>Set:</strong> <span class="set-charizard">Base Set</span> • <strong>Rarity:</strong> <span class="rarity-charizard">Rare</span> • <strong>Condition:</strong> <span class="condition-charizard">Near Mint</span> • <strong>Grading:</strong> <span class="grading-charizard">—</span>
                        </div>
                        <div class="d-flex justify-content-between small">
                            <span>Views</span><strong>150</strong>
                            <span>Favorites</span><strong>75</strong>
                            <span>Inquiries</span><strong>10</strong>
                        </div>
                    </div>
                    <div class="d-flex gap-2 m-2">
                        <button class="btn btn-primary mb-2 w-100 edit-button-charizard">Edit</button>
                        <button class="btn btn-outline-danger mb-2 w-100">Delete</button>
                        <a class="btn btn-outline-secondary mb-2 w-100" href="listing-details.html">View</a>
                    </div>
                </div>
            </div>
            </div>
            <div class="listing-item card mb-3 p-3 listing-item-squirtle">
                <div class="row g-0">
                    <div class="col-md-2 d-flex align-items-center justify-content-center">
                        <img src="https://tcgplayer-cdn.tcgplayer.com/product/42408_in_1000x1000.jpg" class="img-fluid rounded m-2 card-image-sm" alt="Card Image">
                    </div>
                <div class="col-md-9 d-flex flex-column justify-content-center">
                    <div class="card-body">
                        <h5 class="card-title card-name-squirtle">Squirtle — NM</h5>
                        <p class="text-secondary small mb-3">For Trade • Pokémon • Base Set • Listing ID #12346</p>
                        <div class="d-flex justify-content-between small">
                            <span>Trading For</span><strong class="trading-for-squirtle">Jigglypuff Holo — NM</strong>
                        </div>
                        <div class="text-secondary tiny">Source: TCGplayer • Updated: 1d ago</div>
                        <hr>
                        <div class="text-center tiny mb-3">
                            <strong>Game:</strong> <span class="game-squirtle">Pokémon</span> • <strong>Set:</strong> <span class="set-squirtle">Base Set</span> • <strong>Rarity:</strong> <span class="rarity-squirtle">Rare</span> • <strong>Condition:</strong> <span class="condition-squirtle">Near Mint</span> • <strong>Grading:</strong> <span class="grading-squirtle">—</span>
                        </div>
                        <div class="d-flex justify-content-between small">
                            <span>Views</span><strong>100</strong>
                            <span>Favorites</span><strong>70</strong>
                            <span>Inquiries</span><strong>5</strong>
                        </div>
                    </div>
                    <div class="d-flex gap-2 m-2">
                        <button class="btn btn-primary mb-2 w-100 edit-button-squirtle">Edit</button>
                        <button class="btn btn-outline-danger mb-2 w-100">Delete</button>
                        <a class="btn btn-outline-secondary mb-2 w-100" href="listing-details.html">View</a>
                    </div>
                </div>   
            </div>
        </div>
    </div>
    <script>
        function confirmDelete() {
            return confirm("Are you sure you want to delete this listing?");
        }
        // Make working edit button
        const editButtons = document.querySelectorAll('.edit-button-charizard, .edit-button-squirtle');
        editButtons.forEach(button => {
            button.addEventListener('click', () => {
                if(button.closest('.listing-item').classList.contains('listing-item-charizard')) {
                    // Edit card name for Charizard
                    const newName = prompt("Enter new card name:", button.closest('.listing-item').querySelector('.card-name-charizard').innerText);
                    if (newName) {
                        button.closest('.listing-item').querySelector('.card-name-charizard').innerText = newName;
                    }
                    // Edit market price for Charizard
                    const newMarketPrice = prompt("Enter new market price:", button.closest('.listing-item').querySelector('.market-price-charizard').innerText.replace('$', ''));
                    if (newMarketPrice) {
                        button.closest('.listing-item').querySelector('.market-price-charizard').innerText = `$${newMarketPrice}`;
                    }
                    // Edit low price for Charizard
                    const newLowPrice = prompt("Enter new low price:", button.closest('.listing-item').querySelector('.low-price-charizard').innerText.replace('$', ''));
                    if (newLowPrice) {
                        button.closest('.listing-item').querySelector('.low-price-charizard').innerText = `$${newLowPrice}`;
                    }
                    // Edit high price for Charizard
                    const newHighPrice = prompt("Enter new high price:", button.closest('.listing-item').querySelector('.high-price-charizard').innerText.replace('$', ''));
                    if (newHighPrice) {
                        button.closest('.listing-item').querySelector('.high-price-charizard').innerText = `$${newHighPrice}`;
                    }
                    // Edit game for Charizard
                    const newGame = prompt("Enter new game:", button.closest('.listing-item').querySelector('.game-charizard').innerText);
                    if (newGame) {
                        button.closest('.listing-item').querySelector('.game-charizard').innerText = newGame;
                    }
                    // Edit set for Charizard
                    const newSet = prompt("Enter new set:", button.closest('.listing-item').querySelector('.set-charizard').innerText);
                    if (newSet) {
                        button.closest('.listing-item').querySelector('.set-charizard').innerText = newSet;
                    }
                    // Edit rarity for Charizard
                    const newRarity = prompt("Enter new rarity:", button.closest('.listing-item').querySelector('.rarity-charizard').innerText);
                    if (newRarity) {
                        button.closest('.listing-item').querySelector('.rarity-charizard').innerText = newRarity;
                    }
                    // Edit condition for Charizard
                    const newCondition = prompt("Enter new condition:", button.closest('.listing-item').querySelector('.condition-charizard').innerText);
                    if (newCondition) {
                        button.closest('.listing-item').querySelector('.condition-charizard').innerText = newCondition;
                    }
                    // Edit grading for Charizard
                    const newGrading = prompt("Enter new grading:", button.closest('.listing-item').querySelector('.grading-charizard').innerText);
                    if (newGrading) {
                        button.closest('.listing-item').querySelector('.grading-charizard').innerText = newGrading;
                    }
                } else if(button.closest('.listing-item').classList.contains('listing-item-squirtle')) {
                    // Edit card name for Squirtle
                    const newName = prompt("Enter new card name:", button.closest('.listing-item').querySelector('.card-name-squirtle').innerText);
                    if (newName) {
                        button.closest('.listing-item').querySelector('.card-name-squirtle').innerText = newName;
                    }
                    // Edit trading for Squirtle
                    const newTradingFor = prompt("Enter new trading for:", button.closest('.listing-item').querySelector('.trading-for-squirtle').innerText);
                    if (newTradingFor) {
                        button.closest('.listing-item').querySelector('.trading-for-squirtle').innerText = newTradingFor;
                    }
                    // Edit game for Squirtle
                    const newGame = prompt("Enter new game:", button.closest('.listing-item').querySelector('.game-squirtle').innerText);
                    if (newGame) {
                        button.closest('.listing-item').querySelector('.game-squirtle').innerText = newGame;
                    }
                    // Edit set for Squirtle
                    const newSet = prompt("Enter new set:", button.closest('.listing-item').querySelector('.set-squirtle').innerText);
                    if (newSet) {
                        button.closest('.listing-item').querySelector('.set-squirtle').innerText = newSet;
                    }
                    // Edit rarity for Squirtle
                    const newRarity = prompt("Enter new rarity:", button.closest('.listing-item').querySelector('.rarity-squirtle').innerText);
                    if (newRarity) {
                        button.closest('.listing-item').querySelector('.rarity-squirtle').innerText = newRarity;
                    }
                    // Edit condition for Squirtle
                    const newCondition = prompt("Enter new condition:", button.closest('.listing-item').querySelector('.condition-squirtle').innerText);
                    if (newCondition) {
                        button.closest('.listing-item').querySelector('.condition-squirtle').innerText = newCondition;
                    }
                    // Edit grading for Squirtle
                    const newGrading = prompt("Enter new grading:", button.closest('.listing-item').querySelector('.grading-squirtle').innerText);
                    if (newGrading) {
                        button.closest('.listing-item').querySelector('.grading-squirtle').innerText = newGrading;
                    }
                }
            });
        })
        // Delete listing from view on delete button click
        const deleteButtons = document.querySelectorAll('.btn-outline-danger');
        deleteButtons.forEach(button => {
            button.addEventListener('click', () => {
                if (confirmDelete()) {
                    button.closest('.listing-item').remove();
                }
            });
        });
    </script>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
</body>
</html>